<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­˜æ¬¾ç´¯è¨ˆè¿½è¹¤å™¨</title>
    <style>
        :root {
            --primary-color: #3498db;
            --success-color: #2ecc71;
            --bg-color: #f8f9fa;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            padding: 20px;
            margin: 0;
            display: flex;
            justify-content: center;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            width: 100%;
            max-width: 450px;
        }

        .header { text-align: center; margin-bottom: 1.5rem; }
        
        .total-display {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 800;
            color: #2c3e50;
            margin: 10px 0;
        }

        .input-box {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
        }

        input {
            flex: 1;
            padding: 12px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 1rem;
            outline: none;
        }

        button {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        button:active { transform: scale(0.95); }

        .progress-section { margin-bottom: 2rem; }
        
        .progress-bar-bg {
            background: #eee;
            height: 15px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        #progress-fill {
            height: 100%;
            width: 0%;
            background: var(--success-color);
            transition: width 0.5s ease;
        }

        .history-section {
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }

        .history-list {
            list-style: none;
            padding: 0;
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #f0f0f0;
            font-size: 0.9rem;
            color: #666;
        }

        .reset-btn {
            background: none;
            color: #e74c3c;
            font-size: 0.8rem;
            cursor: pointer;
            border: none;
            display: block;
            margin: 20px auto 0;
            opacity: 0.6;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>ç›®æ¨™å­˜å…¥ï¼š$18,000</h2>
        <div class="total-display">$ <span id="totalDisplay">0</span></div>
    </div>

    <div class="input-box">
        <input type="number" id="amountInput" placeholder="è¼¸å…¥æœ¬æ¬¡æŠ•å…¥é‡‘é¡">
        <button onclick="addAmount()">æŠ•å…¥</button>
    </div>

    <div class="progress-section">
        <div style="display:flex; justify-content: space-between; font-size: 0.9rem;">
            <span>é€²åº¦ï¼š<span id="percentText">0</span>%</span>
            <span>å‰©é¤˜ï¼š$<span id="remainingText">18,000</span></span>
        </div>
        <div class="progress-bar-bg">
            <div id="progress-fill"></div>
        </div>
    </div>

    <div class="history-section">
        <div style="font-weight: bold; margin-bottom: 10px;">å­˜æ¬¾ç´€éŒ„</div>
        <div id="historyList" class="history-list">
            </div>
    </div>

    <button class="reset-btn" onclick="resetAll()">é‡è¨­æ‰€æœ‰æ•¸æ“š</button>
</div>

<script>
    const GOAL = 18000;
    let total = 0;
    let history = [];

    // åˆå§‹åŒ–è¼‰å…¥
    window.onload = function() {
        const savedData = JSON.parse(localStorage.getItem('savingData'));
        if (savedData) {
            total = savedData.total || 0;
            history = savedData.history || [];
            updateUI();
        }
    };

    function addAmount() {
        const input = document.getElementById('amountInput');
        const value = parseFloat(input.value);

        if (isNaN(value) || value <= 0) {
            alert("è«‹è¼¸å…¥æ­£ç¢ºçš„é‡‘é¡");
            return;
        }

        // ç´¯è¨ˆé‡‘é¡
        total += value;
        
        // åŠ å…¥ç´€éŒ„
        const now = new Date();
        const dateStr = `${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes()}`;
        history.unshift({ date: dateStr, amount: value }); // æ–°çš„åœ¨å‰

        // å­˜å…¥ localStorage
        saveData();
        
        // æ›´æ–°ä»‹é¢
        updateUI();
        
        // æ¸…ç©ºè¼¸å…¥æ¡†
        input.value = '';
    }

    function updateUI() {
        document.getElementById('totalDisplay').innerText = total.toLocaleString();
        
        const percent = Math.min((total / GOAL) * 100, 100).toFixed(1);
        document.getElementById('percentText').innerText = percent;
        document.getElementById('progress-fill').style.width = percent + '%';
        
        const remaining = Math.max(GOAL - total, 0);
        document.getElementById('remainingText').innerText = remaining.toLocaleString();

        // æ›´æ–°ç´€éŒ„åˆ—è¡¨
        const listContainer = document.getElementById('historyList');
        listContainer.innerHTML = history.map(item => `
            <div class="history-item">
                <span>ğŸ“… ${item.date}</span>
                <span><b>+$${item.amount.toLocaleString()}</b></span>
            </div>
        `).join('');
    }

    function saveData() {
        localStorage.setItem('savingData', JSON.stringify({
            total: total,
            history: history
        }));
    }

    function resetAll() {
        if (confirm("ç¢ºå®šè¦åˆªé™¤æ‰€æœ‰å­˜æ¬¾ç´€éŒ„å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚")) {
            localStorage.removeItem('savingData');
            total = 0;
            history = [];
            updateUI();
        }
    }
</script>

</body>
</html>
